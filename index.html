<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>thegolfbuild</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="manifest" href="/manifest.webmanifest" />
    <meta name="theme-color" content="#070707" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="bg-grid"></div>
    <header class="topbar">
      <div class="brand-wrap">
        <p class="brand-tag">Golf training intelligence</p>
        <h1>thegolfbuild</h1>
      </div>
      <div class="topbar-right">
        <button id="loadDemoBtn" class="btn btn-outline" type="button">Load Demo Data</button>
        <div class="routine-nav">
          <button id="showGeneratedRoutineBtn" class="btn btn-outline active" type="button">Generated Routine</button>
          <button id="showCustomRoutineBtn" class="btn btn-outline" type="button">Custom Routine</button>
          <button id="showDrillLibraryBtn" class="btn btn-outline" type="button">Drills</button>
          <button id="showStatsBtn" class="btn btn-outline" type="button">Stats</button>
        </div>
        <div id="welcomePanel" class="welcome-panel hidden">
          <p id="welcomeName" class="welcome-name"></p>
          <p id="welcomeMessage" class="welcome-message"></p>
          <button id="topLogoutBtn" class="btn btn-danger" type="button">Logout</button>
          <button id="changePasswordBtn" class="btn btn-outline" type="button">Change Password</button>
          <div id="changePasswordPanel" class="reset-panel hidden">
            <label>
              Current Password
              <input type="password" id="currentPasswordInput" placeholder="Your current password" />
            </label>
            <label>
              New Password
              <input type="password" id="newPasswordInput" placeholder="At least 8 characters" />
            </label>
            <div class="cta-row">
              <button id="submitPasswordChangeBtn" class="btn btn-primary" type="button">Update Password</button>
              <button id="cancelPasswordChangeBtn" class="btn btn-outline" type="button">Cancel</button>
            </div>
          </div>
        </div>
        <p id="topMessage" class="top-message hidden" aria-live="polite"></p>
      </div>
    </header>

    <main class="layout">
      <section id="authPanel" class="panel auth-panel">
        <div class="auth-head">
          <h2>Account</h2>
          <p id="authStatus" class="auth-status">Not signed in</p>
        </div>

        <form id="authForm" class="form-stack auth-grid">
          <label id="registerNameField" class="hidden">
            Name
            <input type="text" id="accountName" placeholder="Jordan Lee" />
          </label>
          <label>
            Email
            <input type="email" id="accountEmail" placeholder="you@example.com" required />
          </label>
          <label>
            Password
              <input type="password" id="accountPassword" placeholder="At least 8 characters" required />
          </label>
          <div class="cta-row">
            <button id="registerBtn" class="btn btn-primary hidden" type="button">Create Account</button>
            <button id="loginBtn" class="btn btn-primary" type="button">Login</button>
            <button id="showRegisterBtn" class="btn btn-outline" type="button">Register</button>
            <button id="showLoginBtn" class="btn btn-outline hidden" type="button">Back to Login</button>
            <button id="logoutBtn" class="btn btn-danger hidden" type="button">Logout</button>
          </div>
        </form>
        <p id="appMessage" class="app-message" aria-live="polite"></p>
      </section>

      <section class="panel profile-panel">
        <h2>Your Profile</h2>
        <form id="profileForm" class="form-stack">
          <label>
            Name
            <input type="text" id="name" placeholder="Jordan Lee" required />
          </label>

          <label>
            Handicap Level
            <select id="handicap" required>
              <option value="">Select handicap range</option>
              <option value="Beginner (20+)">Beginner (20+)</option>
              <option value="Intermediate (10-19)">Intermediate (10-19)</option>
              <option value="Advanced (0-9)">Advanced (0-9)</option>
            </select>
          </label>

          <label>
            Primary Weakness
            <select id="weakness" required>
              <option value="">Select weakness</option>
              <option value="Driving accuracy">Driving accuracy</option>
              <option value="Approach consistency">Approach consistency</option>
              <option value="Short game touch">Short game touch</option>
              <option value="Putting confidence">Putting confidence</option>
              <option value="Course management">Course management</option>
            </select>
          </label>

          <div class="inline-fields">
            <label>
              Days / week
              <input type="number" id="daysPerWeek" min="1" max="7" value="3" required />
            </label>
            <label>
              Hours / session
              <input type="number" id="hoursPerSession" min="0.5" max="6" step="0.5" value="1.5" required />
            </label>
          </div>

          <label>
            Notes or Constraints
            <textarea id="notes" rows="3" placeholder="Example: only have access to range on weekdays"></textarea>
          </label>

          <div class="cta-row">
            <button id="generateRoutineBtn" class="btn btn-primary" type="submit">Generate Routine</button>
            <button id="clearProfileBtn" class="btn btn-outline" type="button">Clear</button>
          </div>
        </form>
      </section>

      <section class="panel plan-panel">
        <h2 id="planPanelTitle">Generated Practice Routine</h2>
        <div id="generatedRoutineView">
          <div class="panel-subsection generated-subsection">
            <h3>Rules Engine Plan</h3>
            <p class="plan-mode-note">Use your profile form to generate a personalized routine.</p>
          </div>
          <div id="routineEmptyState" class="empty-state">
            Sign in, then fill out your profile to generate a training routine.
          </div>
          <article id="routineCard" class="routine-card hidden">
            <div class="routine-header">
              <div>
                <p id="routineTitle" class="routine-title"></p>
                <p id="routineMeta" class="routine-meta"></p>
              </div>
              <div class="save-controls">
                <input id="saveRoutineNameInput" type="text" placeholder="Save as (optional title)" />
                <button id="saveRoutineBtn" class="btn btn-primary" type="button">Save to Profile</button>
                <button id="exportPdfBtn" class="btn btn-outline" type="button">PDF</button>
                <button id="exportIcalBtn" class="btn btn-outline" type="button">iCal</button>
              </div>
            </div>
            <div id="routineWeeks" class="routine-weeks"></div>
          </article>
        </div>
        <div id="customRoutineView" class="hidden">
          <div class="panel-subsection custom-subsection">
            <h3>Custom Routine Builder</h3>
            <p class="plan-mode-note">Create your own drill sequence and structure it exactly how you want.</p>
          </div>
          <form id="customRoutineForm" class="form-stack">
            <label>
              Custom Routine Title
              <input type="text" id="customTitle" placeholder="My 3-Week Short Game Sprint" required />
            </label>
            <div class="inline-fields">
              <label>
                Weeks
                <input type="number" id="customWeeks" min="1" max="12" value="3" required />
              </label>
              <label>
                Sessions / week
                <input type="number" id="customSessions" min="1" max="7" value="3" required />
              </label>
            </div>
            <label>
              Session Plan (one line per task)
              <textarea id="customTasks" rows="4" placeholder="15 min putting ladder&#10;30 min wedge distance control&#10;20 min bunker exits" required></textarea>
            </label>
            <button class="btn btn-outline" type="submit">Create Custom Routine</button>
          </form>
        </div>
      </section>

      <section id="drillLibraryPanel" class="panel drill-library-panel hidden">
        <h2>Drill Library</h2>
        <p class="plan-mode-note">Browse all 30 drills grouped by weakness category. Click any drill to expand its description.</p>
        <div id="drillLibraryContent" class="drill-library-content"></div>
      </section>

      <section id="statsPanel" class="panel stats-panel hidden">
        <h2>Performance Dashboard</h2>
        <div id="statsContent" class="stats-content">
          <div class="stats-grid">
            <div class="stat-card">
              <p class="stat-value" id="statRoutines">-</p>
              <p class="stat-label">Routines Saved</p>
            </div>
            <div class="stat-card">
              <p class="stat-value" id="statCompleted">-</p>
              <p class="stat-label">Sessions Completed</p>
            </div>
            <div class="stat-card">
              <p class="stat-value" id="statStreak">-</p>
              <p class="stat-label">Current Streak</p>
            </div>
            <div class="stat-card">
              <p class="stat-value" id="statLongest">-</p>
              <p class="stat-label">Longest Streak</p>
            </div>
          </div>
          <div class="stats-detail">
            <h3>Session Progress</h3>
            <div class="progress-bar-wrap">
              <div id="statProgressBar" class="progress-bar" style="width:0%"></div>
            </div>
            <p id="statProgressText" class="stat-progress-text">0 / 0 sessions</p>
          </div>
          <div class="stats-detail">
            <h3>Weakness Coverage</h3>
            <div id="statWeakness" class="weakness-chart"></div>
          </div>
        </div>
      </section>

      <section class="panel saved-panel">
        <h2>Saved Routines</h2>
        <div class="usage-row">
          <p id="usageText" class="usage-text"></p>
          <button id="upgradeBtn" class="btn btn-primary" type="button">Upgrade to Pro</button>
        </div>
        <div id="savedEmptyState" class="empty-state">No routines saved yet.</div>
        <div id="savedList" class="saved-list"></div>
      </section>
    </main>

    <template id="savedRoutineTemplate">
      <article class="saved-item">
        <div class="saved-info">
          <p class="saved-title"></p>
          <p class="saved-meta"></p>
          <div class="saved-progress-wrap">
            <div class="saved-progress-bar"></div>
          </div>
          <p class="saved-progress-text"></p>
        </div>
        <div class="saved-actions">
          <button class="btn btn-outline load-btn" type="button">Load</button>
          <button class="btn btn-danger delete-btn" type="button">Delete</button>
        </div>
      </article>
    </template>

    <script src="app.js"></script>
    <script>
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("/sw.js").catch(() => {});
      }
    </script>
  </body>
</html>
